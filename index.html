<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>A Leaflet map</title>

	<!-- 
		TODO: 
			* include minified js sources 
			* delete unused libs e.g. Leaflet-provider
	-->

	<!-- jQuery -->
	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.js"></script>

	<!-- Underscore -->
	<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore.js"></script>

	<!-- Leaflet -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">
	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

	<!-- Leaflet plugins -->
	<script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet-providers/1.0.7/leaflet-providers.js"></script>

	<!-- D3 -->
	<!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.12/d3.js"></script> -->

	<script>
		my = {}
		my.map = null;
		// some more library code
	</script>

	<style>
		body, html {
			height: 100%;
			width: 100%;
			margin: 0;
			padding: 0;
		}
		#map-container {
			height: 100%;
			width: 100%;
		}
		#map {
			height: 100%;
			width: 100%;
			background: #eee;
		}
		/* some more styles */
	</style>
</head>
<body>

<div id="map-container">
	<div id="map"></div>
</div>

<script>
	$(function(){
		// create the map
		my.map = L.map('map', {
			minZoom: 5,
			maxZoom: 9,
		}).setView([34, 42], 5)

		// add a base map layer
		var esri = L.tileLayer.provider('Esri.WorldGrayCanvas');
		var osm = L.tileLayer('http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		}).addTo(my.map);




		// add the scanned map as a tile set
		var scanBounds = [[28.63153408, 31.31328073], [42.55400735, 51.15800009]]
		var scan = L.tileLayer('tiles/Z{z}/{y}/{x}.png', {
			minZoom: 3,
			maxZoom: 8,
			errorTileUrl: 'tiles/empty.png',
			bounds: scanBounds
		}).addTo(my.map);
		my.map.fitBounds(scanBounds);

		// fetch the json data for the digitized boundaries
		var boundaries;
		$.getJSON( "sp.geojson", function( data ) {
			// console.log(data)
			boundaries = L.geoJson(data, {
			    style: function (feature) {
			    	var color = 'black', 
			    		dashArray = 'none';

			    	if (feature.properties.style.indexOf('red') >= 0) {
			    		color = 'red';
			    	} else if (feature.properties.style.indexOf('blue') >= 0) {
			    		color = 'blue';
			    	} 

			    	if (feature.properties.style.indexOf('dashed') >= 0) {
			    		dashArray = '10,10';
			    	} 

			        return {weight: 2, color: color, dashArray: dashArray};
			    },
			    onEachFeature: function (feature, layer) {
			        layer.bindPopup(feature.properties.desc);
			    }
			}).addTo(my.map);
			// add layer control
			var baseLayers = {
			    "OSM": osm,
			    "ESRI": esri,
			};
			var overlays = {
			    "Sykes-Picot Boundaries": boundaries,
			    "Scanned map": scan,
			};
			L.control.layers(baseLayers, overlays).addTo(my.map);

		});


	})
</script>
</body>
</html>